<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 3: 平台接入 - OpenClaw 101</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="learning.css">
</head>
<body class="learning-page">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../index.html" class="logo-link">
                    <span class="logo">🦞</span>
                    <span class="brand-text">OpenClaw 101</span>
                </a>
            </div>
            <div class="nav-links">
                <a href="../index.html#learning-path" class="nav-link">← 返回学习路径</a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="day-hero">
        <div class="container">
            <div class="day-badge">Day 03</div>
            <h1>平台接入</h1>
            <p class="day-desc">将 OpenClaw 接入你常用的通讯平台。配置 Telegram Bot、飞书机器人、钉钉机器人等，实现多渠道访问。</p>
            
            <div class="day-meta">
                <span>⏱️ 预计学习时间：50 分钟</span>
                <span>📚 5 个章节</span>
                <span>🎯 初学者</span>
            </div>
        </div>
    </header>

    <!-- Content -->
    <main class="learning-content container">
        <!-- Progress -->
        <div class="progress-bar">
            <div class="progress-fill" style="width: 42%"></div>
            <span>7天学习路径 - 第 3/7 天</span>
        </div>

        <!-- Sidebar + Main -->
        <div class="content-layout">
            <!-- Sidebar Navigation -->
            <aside class="content-sidebar">
                <nav class="section-nav">
                    <h3>本日内容</h3>
                    <ul>
                        <li><a href="#overview" class="active">接入概览</a></li>
                        <li><a href="#telegram">Telegram 配置</a></li>
                        <li><a href="#feishu">飞书配置</a></li>
                        <li><a href="#dingtalk">钉钉配置</a></li>
                        <li><a href="#discord">Discord 配置</a></li>
                        <li><a href="#others">其他平台</a></li>
                        <li><a href="#next">下一步</a></li>
                    </ul>
                    
                    <h3>学习路径</h3>
                    <ul class="day-nav">
                        <li><a href="day1.html">Day 1: 初识 OpenClaw</a></li>
                        <li><a href="day2.html">Day 2: 环境搭建</a></li>
                        <li class="current">Day 3: 平台接入</li>
                        <li><a href="day4.html">Day 4: 技能探索</a></li>
                        <li><a href="day5.html">Day 5: 记忆与个性化</a></li>
                        <li><a href="day6.html">Day 6: 技能开发</a></li>
                        <li><a href="day7.html">Day 7: 进阶与生产</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Main Content -->
            <article class="content-main">
                <!-- Section 1: Overview -->
                <section id="overview" class="content-section">
                    <h2>接入概览</h2>
                    
                    <p>OpenClaw 支持多种通讯平台，让你可以通过熟悉的聊天工具与 AI 助手交互。每个平台的接入方式略有不同，但基本流程相似。</p>
                    
                    <div class="highlight-box">
                        <h4>🔄 通用接入流程</h4>
                        <ol>
                            <li>在目标平台创建机器人/应用</li>
                            <li>获取 Token/API Key</li>
                            <li>在 OpenClaw 中配置平台参数</li>
                            <li>配置 Webhook 或轮询</li>
                            <li>测试连接</li>
                        </ol>
                    </div>

                    <h3>支持的平台</h3>
                    
                    <div class="capability-grid">
                        <div class="capability-card">
                            <div class="cap-icon">✈️</div>
                            <h4>Telegram</h4>
                            <p>全球流行，功能丰富，最佳体验</p>
                        </div>
                        <div class="capability-card">
                            <div class="cap-icon">📘</div>
                            <h4>飞书</h4>
                            <p>国内首选，企业协作完善</p>
                        </div>
                        <div class="capability-card">
                            <div class="cap-icon">🔔</div>
                            <h4>钉钉</h4>
                            <p>阿里生态，企业用户广泛</p>
                        </div>
                        <div class="capability-card">
                            <div class="cap-icon">🎮</div>
                            <h4>Discord</h4>
                            <p>游戏社区，开发者聚集</p>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>💡 选择建议</h4>
                        <p>个人用户推荐使用 Telegram（国际）或飞书（国内）；企业用户根据已有办公平台选择钉钉或飞书。</p>
                    </div>
                </section>

                <!-- Section 2: Telegram -->
                <section id="telegram" class="content-section">
                    <h2>Telegram 配置</h2>
                    
                    <p>Telegram 是 OpenClaw 支持最完善的平台之一，推荐作为首选接入方式。</p>

                    <h3>步骤 1：创建 Bot</h3>
                    <ol>
                        <li>打开 Telegram，搜索 <strong>@BotFather</strong></li>
                        <li>发送 <code>/newbot</code> 命令</li>
                        <li>按提示设置 Bot 名称和用户名（用户名必须以 bot 结尾）</li>
                        <li>保存获得的 <strong>HTTP API Token</strong></li>
                    </ol>

                    <div class="code-block">
                        <pre><code># BotFather 会返回类似：
Use this token to access the HTTP API:
123456789:ABCdefGHIjklMNOpqrsTUVwxyz</code></pre>
                    </div>

                    <h3>步骤 2：配置 OpenClaw</h3>
                    
                    <p>编辑 OpenClaw 配置文件（通常位于 <code>~/.openclaw/config.json</code>）：</p>
                    
                    <div class="code-block">
                        <pre><code>{
  "gateways": [
    {
      "type": "telegram",
      "token": "YOUR_BOT_TOKEN_HERE",
      "enabled": true,
      "webhook": {
        "enabled": false
      },
      "polling": {
        "enabled": true,
        "interval": 1000
      }
    }
  ]
}</code></pre>
                    </div>

                    <h3>步骤 3：重启 OpenClaw</h3>
                    <div class="code-block">
                        <pre><code>openclaw restart</code></pre>
                        <button class="copy-btn" onclick="copyToClipboard(this, 'openclaw restart')">📋</button>
                    </div>

                    <h3>步骤 4：测试</h3>
                    
                    <p>在 Telegram 中找到你的 Bot，发送 <code>/hello</code> 或 <code>/help</code>，应该能收到回复。</p>

                    <div class="highlight-box">
                        <h4>🔧 进阶配置</h4>
                        <ul>
                            <li><strong>设置命令菜单</strong> - 使用 @BotFather 的 /setcommands 设置快捷命令</li>
                            <li><strong>隐私模式</strong> - 关闭隐私模式让 Bot 能读取群聊消息</li>
                            <li><strong>Webhook</strong> - 生产环境建议使用 Webhook 替代轮询</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 3: Feishu/Lark -->
                <section id="feishu" class="content-section">
                    <h2>飞书配置</h2>
                    
                    <p>飞书是国内最流行的企业协作平台之一，OpenClaw 对其支持完善。</p>

                    <h3>步骤 1：创建飞书应用</h3>
                    <ol>
                        <li>访问 <a href="https://open.feishu.cn/app" target="_blank">飞书开放平台</a></li>
                        <li>点击「创建企业自建应用」</li>
                        <li>填写应用名称和描述</li>
                        <li>进入应用管理后台</li>
                    </ol>

                    <h3>步骤 2：获取凭证</h3>
                    
                    <p>在「凭证与基础信息」页面，获取：</p>
                    <ul>
                        <li>App ID</li>
                        <li>App Secret</li>
                    </ul>

                    <h3>步骤 3：配置权限</h3>
                    
                    <p>在「权限管理」中添加以下权限：</p>
                    <ul>
                        <li><code>im:chat:readonly</code> - 读取群组信息</li>
                        <li><code>im:message:send_as_bot</code> - 以机器人身份发送消息</li>
                        <li><code>im:message.group_msg</code> - 接收群消息</li>
                    </ul>

                    <h3>步骤 4：配置事件订阅</h3>
                    
                    <p>在「事件订阅」中：</p>
                    <ol>
                        <li>开启事件订阅</li>
                        <li>设置请求地址：<code>https://your-domain.com/webhook/feishu</code></li>
                        <li>添加订阅事件：<code>im.message.receive_v1</code></li>
                    </ol>

                    <h3>步骤 5：OpenClaw 配置</h3>
                    <div class="code-block">
                        <pre><code>{
  "gateways": [
    {
      "type": "feishu",
      "appId": "YOUR_APP_ID",
      "appSecret": "YOUR_APP_SECRET",
      "enabled": true,
      "encryptKey": "",
      "verificationToken": ""
    }
  ]
}</code></pre>
                    </div>

                    <h3>步骤 6：发布应用</h3>
                    
                    <p>在「版本管理与发布」中创建版本并申请发布，审核通过后即可使用。</p>

                    <div class="info-box">
                        <h4>⚠️ 注意事项</h4>
                        <ul>
                            <li>飞书应用需要企业管理员审核才能发布</li>
                            <li>个人测试可以使用「测试企业和人员」功能</li>
                            <li>确保服务器能被飞书服务器访问（公网 IP 或域名）</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 4: DingTalk -->
                <section id="dingtalk" class="content-section">
                    <h2>钉钉配置</h2>
                    
                    <p>钉钉是国内企业广泛使用的办公平台，配置流程与飞书类似。</p>

                    <h3>步骤 1：创建钉钉应用</h3>
                    <ol>
                        <li>访问 <a href="https://open.dingtalk.com/" target="_blank">钉钉开放平台</a></li>
                        <li>进入「应用开发」→「企业内部应用」</li>
                        <li>点击「创建应用」</li>
                        <li>选择「机器人」类型</li>
                    </ol>

                    <h3>步骤 2：配置机器人</h3>
                    
                    <p>在机器人详情页获取：</p>
                    <ul>
                        <li>AgentId</li>
                        <li>AppKey</li>
                        <li>AppSecret</li>
                    </ul>

                    <h3>步骤 3：设置消息接收</h3>
                    
                    <p>在「机器人」设置中：</p>
                    <ol>
                        <li>开启「接收消息」</li>
                        <li>设置「消息接收地址」：<code>https://your-domain.com/webhook/dingtalk</code></li>
                        <li>添加「加签」或「IP 白名单」进行安全验证</li>
                    </ol>

                    <h3>步骤 4：OpenClaw 配置</h3>
                    <div class="code-block">
                        <pre><code>{
  "gateways": [
    {
      "type": "dingtalk",
      "agentId": "YOUR_AGENT_ID",
      "appKey": "YOUR_APP_KEY",
      "appSecret": "YOUR_APP_SECRET",
      "enabled": true,
      "signSecret": "YOUR_SIGN_SECRET"
    }
  ]
}</code></pre>
                    </div>

                    <h3>步骤 5：发布到组织</h3>
                    
                    <p>在「版本管理」中发布应用，并申请上架到企业内部。</p>

                    <div class="highlight-box">
                        <h4>🔔 钉钉特性</h4>
                        <ul>
                            <li>支持 Markdown 消息格式</li>
                            <li>支持卡片消息（ActionCard）</li>
                            <li>支持群机器人（Webhook 方式，更简单）</li>
                            <li>支持@用户和@所有人</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 5: Discord -->
                <section id="discord" class="content-section">
                    <h2>Discord 配置</h2>
                    
                    <p>Discord 是游戏和开发者社区的首选平台，OpenClaw 对其支持良好。</p>

                    <h3>步骤 1：创建 Discord 应用</h3>
                    <ol>
                        <li>访问 <a href="https://discord.com/developers/applications" target="_blank">Discord Developer Portal</a></li>
                        <li>点击「New Application」</li>
                        <li>输入应用名称</li>
                    </ol>

                    <h3>步骤 2：创建 Bot</h3>
                    
                    <ol>
                        <li>进入「Bot」标签页</li>
                        <li>点击「Add Bot」</li>
                        <li>在「Privileged Gateway Intents」中开启：</li>
                        <li><code>MESSAGE CONTENT INTENT</code>（必须开启）</li>
                    </ol>

                    <h3>步骤 3：获取 Token</h3>
                    
                    <p>在 Bot 页面点击「Reset Token」，保存新生成的 Token。</p>

                    <h3>步骤 4：邀请 Bot 加入服务器</h3>
                    
                    <ol>
                        <li>进入「OAuth2」→「URL Generator」</li>
                        <li>在 Scopes 中选择 <code>bot</code></li>
                        <li>在 Bot Permissions 中选择：</li>
                        <ul>
                            <li>Send Messages</li>
                            <li>Read Message History</li>
                            <li>View Channels</li>
                        </ul>
                        <li>复制生成的 URL，在浏览器中打开并选择服务器</li>
                    </ol>

                    <h3>步骤 5：OpenClaw 配置</h3>
                    <div class="code-block">
                        <pre><code>{
  "gateways": [
    {
      "type": "discord",
      "token": "YOUR_BOT_TOKEN",
      "enabled": true
    }
  ]
}</code></pre>
                    </div>

                    <div class="info-box">
                        <h4>🎮 Discord 特性</h4>
                        <ul>
                            <li>支持丰富的消息格式（Embed、按钮、选择菜单）</li>
                            <li>支持斜杠命令（Slash Commands）</li>
                            <li>支持线程（Threads）</li>
                            <li>支持语音频道（需额外配置）</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 6: Other Platforms -->
                <section id="others" class="content-section">
                    <h2>其他平台</h2>
                    
                    <p>OpenClaw 还支持更多平台，以下是简要说明：</p>

                    <div class="comparison-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>平台</th>
                                    <th>特点</th>
                                    <th>配置复杂度</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Slack</td>
                                    <td>企业协作，工作流丰富</td>
                                    <td class="highlight">中等</td>
                                </tr>
                                <tr>
                                    <td>WhatsApp</td>
                                    <td>全球用户，需 Meta 认证</td>
                                    <td>较高</td>
                                </tr>
                                <tr>
                                    <td>企业微信</td>
                                    <td>国内企业，需企业认证</td>
                                    <td>较高</td>
                                </tr>
                                <tr>
                                    <td>微信公众号</td>
                                    <td>国内用户广泛，需审核</td>
                                    <td>较高</td>
                                </tr>
                                <tr>
                                    <td>Matrix</td>
                                    <td>去中心化，隐私优先</td>
                                    <td class="highlight">简单</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="highlight-box">
                        <h4>📚 相关资源</h4>
                        <ul>
                            <li><a href="https://docs.openclaw.ai/gateways" target="_blank">官方网关文档</a> - 所有支持平台的详细配置</li>
                            <li><a href="https://clawhub.com/skills/gateway" target="_blank">ClawHub 网关技能</a> - 社区贡献的额外平台支持</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 7: Next Steps -->
                <section id="next" class="content-section">
                    <h2>下一步</h2>
                    
                    <p>恭喜！你已经成功将 OpenClaw 接入至少一个通讯平台。</p>

                    <div class="checklist">
                        <h3>✅ 本日完成清单</h3>
                        
                        <ul>
                            <li><input type="checkbox" checked> 了解平台接入流程</li>
                            <li><input type="checkbox" checked> 创建至少一个平台机器人</li>
                            <li><input type="checkbox" checked> 配置 OpenClaw 网关</li>
                            <li><input type="checkbox" checked> 成功发送测试消息</li>
                        </ul>
                    </div>

                    <div class="next-day-preview">
                        <h3>🚀 明天预告：Day 4 - 技能探索</h3>
                        
                        <p>明天我们将探索 ClawHub 技能市场，学习如何：</p>
                        
                        <ul>
                            <li>浏览和搜索社区技能</li>
                            <li>安装和配置技能</li>
                            <li>理解技能权限模型</li>
                            <li>安全管理第三方技能</li>
                        </ul>

                        <a href="day4.html" class="btn btn-primary btn-lg">
                            继续 Day 4
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
                        </a>
                    </div>
                </section>

                <!-- Navigation Footer -->
                <footer class="day-footer">
                    <div class="day-nav-footer">
                        <a href="day2.html" class="btn btn-secondary">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>
                            上一章：环境搭建
                        </a>
                        <a href="day4.html" class="btn btn-secondary">
                            下一章：技能探索
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>
                        </a>
                    </div>
                </footer>
            </article>
        </div>
    </main>

    <script>
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Update active nav on scroll
        const sections = document.querySelectorAll('.content-section');
        const navLinks = document.querySelectorAll('.section-nav a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });

        // Copy to clipboard
        function copyToClipboard(btn, text) {
            navigator.clipboard.writeText(text).then(() => {
                const original = btn.innerHTML;
                btn.innerHTML = '✓';
                btn.style.color = 'var(--accent-success)';
                
                setTimeout(() => {
                    btn.innerHTML = original;
                    btn.style.color = '';
                }, 2000);
            });
        }
    </script>
</body>
</html>
